{"ast":null,"code":"var _jsxFileName = \"/home/premtsd/mern_personal_blog-master/client/src/routes/article/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Style from \"./Article.module.css\";\nimport Blogheader from \"../../components/blogheader/index\";\nimport ReactMarkdown from \"react-markdown\";\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\";\nimport Comment from \"../comments/index\";\nimport { FacebookShareButton, FacebookIcon, EmailShareButton, EmailIcon } from 'react-share';\n\nconst Article = () => {\n  let history = useHistory();\n  const [article, setArticle] = useState({});\n  const [comment, setComment] = useState({});\n  const {\n    slug\n  } = useParams();\n  useEffect(() => {\n    getDataBySlug(slug);\n  }, [slug]);\n\n  const getDataBySlug = async slug => {\n    try {\n      const res = await axios.get(`http://localhost:4000/api/post/${slug}`);\n      setArticle(res.data);\n      setComment(res.data.comment);\n    } catch (err) {\n      console.log({\n        error: err\n      });\n    }\n  };\n\n  const deleteArticle = async id => {\n    if (window.confirm(\"Do you wanna delete this article?\")) {\n      try {\n        axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n        await axios.delete(`http://localhost:4000/api/delete/${id}`);\n        history.push(\"/\");\n      } catch (err) {\n        console.log({\n          error: err\n        });\n      }\n    }\n  };\n\n  const editDeleteArticle = id => {\n    if (sessionStorage.token) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: Style.buttons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => deleteArticle(id),\n        className: Style.linkButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }\n      }, \"Delete\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => history.push(`/edit/${slug}`),\n        className: Style.linkButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }\n      }, \"Edit\"));\n    }\n  };\n\n  const renderMarkdown = () => {\n    if (article.markdown === undefined) {\n      return /*#__PURE__*/React.createElement(SkeletonTheme, {\n        color: \"#161f27\",\n        highlightColor: \"#324759\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Skeleton, {\n        count: 15,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(ReactMarkdown, {\n        className: Style.markdown,\n        source: article.markdown,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }\n      });\n    }\n  };\n\n  const rendercomments = () => {\n    if (comment.length === 0 || comment == null) ;else {\n      var arrays = [];\n\n      for (var val in comment) {\n        arrays.push(comment[val]);\n      }\n\n      arrays.reverse();\n      return arrays.map(array => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 16\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          className: Style.button,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 11\n          }\n        }, array));\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: Style.article,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: Style.controlHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Blogheader, {\n    image: article.image,\n    title: article.title,\n    description: article.description,\n    createdAt: article.createdAt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }), editDeleteArticle(article._id)), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }), renderMarkdown(), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 3\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"right\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 3\n    }\n  }, \"Blog Share\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(FacebookShareButton, {\n    url: \"http://localhost:3001/article/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(FacebookIcon, {\n    style: {\n      height: \"25px\",\n      width: \"25px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 61\n    }\n  })), /*#__PURE__*/React.createElement(EmailShareButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(EmailIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(Comment, {\n    slug1: article._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 46\n    }\n  }), rendercomments(), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 16\n    }\n  }));\n};\n\nexport default Article;","map":{"version":3,"sources":["/home/premtsd/mern_personal_blog-master/client/src/routes/article/index.js"],"names":["React","useEffect","useState","useHistory","useParams","axios","Style","Blogheader","ReactMarkdown","Skeleton","SkeletonTheme","Comment","FacebookShareButton","FacebookIcon","EmailShareButton","EmailIcon","Article","history","article","setArticle","comment","setComment","slug","getDataBySlug","res","get","data","err","console","log","error","deleteArticle","id","window","confirm","defaults","headers","common","sessionStorage","token","delete","push","editDeleteArticle","buttons","linkButton","renderMarkdown","markdown","undefined","rendercomments","length","arrays","val","reverse","map","array","button","controlHeader","image","title","description","createdAt","_id","textAlign","height","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Style from \"./Article.module.css\";\nimport Blogheader from \"../../components/blogheader/index\";\nimport ReactMarkdown from \"react-markdown\";\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\";\nimport Comment from \"../comments/index\";\nimport {\n FacebookShareButton,FacebookIcon,EmailShareButton,EmailIcon\n} from 'react-share';\n\nconst Article = () => {\n  let history = useHistory();\n  const [article, setArticle] = useState({});\n  const [comment, setComment] = useState({});\n  const { slug } = useParams();\n\n  useEffect(() => {\n    getDataBySlug(slug);\n  }, [slug]);\n\n  const getDataBySlug = async (slug) => {\n    try {\n      const res = await axios.get(`http://localhost:4000/api/post/${slug}`);\n      setArticle(res.data);\n      setComment(res.data.comment);\n    } catch (err) {\n      console.log({ error: err });\n    }\n  };\n\n  const deleteArticle = async (id) => {\n    if (window.confirm(\"Do you wanna delete this article?\")) {\n      try {\n        axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n        await axios.delete(`http://localhost:4000/api/delete/${id}`);\n        history.push(\"/\");\n      } catch (err) {\n        console.log({ error: err });\n      }\n    }\n  };\n\n  const editDeleteArticle = (id) => {\n    if (sessionStorage.token) {\n      return (\n        <div className={Style.buttons}>\n          <button\n            onClick={() => deleteArticle(id)}\n            className={Style.linkButton}\n          >\n            Delete\n          </button>\n          <button\n            onClick={() => history.push(`/edit/${slug}`)}\n            className={Style.linkButton}\n          >\n            Edit\n          </button>\n        </div>\n      );\n    }\n  };\n\n  const renderMarkdown = () => {\n    if (article.markdown === undefined) {\n      return (\n        <SkeletonTheme color=\"#161f27\" highlightColor=\"#324759\">\n          <Skeleton count={15} />\n        </SkeletonTheme>\n      );\n    } else {\n      return (\n        <ReactMarkdown className={Style.markdown} source={article.markdown} />\n      );\n    }\n  };\n\n  const rendercomments = () => {\n    if (comment.length===0 || comment==null) ;\n     else {   \n      var arrays=[]\n      for(var val in comment){\n        arrays.push(comment[val])\n      }\n      arrays.reverse();\n      return arrays.map((array)=>{\n        return <div >\n          \n          <button\n         \n          className={Style.button}\n        >{array}</button>\n        </div>\n      })\n     \n    }\n  };\n\n  return (\n    <div className={Style.article}>\n      <div className={Style.controlHeader}>\n        <Blogheader\n          image={article.image}\n          title={article.title}\n          description={article.description}\n          createdAt={article.createdAt}\n        />\n        {editDeleteArticle(article._id)}\n      </div>\n      <hr />\n  {renderMarkdown()}\n  <br></br>\n  <div style={{textAlign:\"right\"}}>\n    Blog Share\n    <br></br>\n  \n  <FacebookShareButton url=\"http://localhost:3001/article/\"><FacebookIcon style={{height:\"25px\",width:\"25px\"}}/></FacebookShareButton>\n  <EmailShareButton><EmailIcon></EmailIcon></EmailShareButton>\n  </div>\n      <Comment slug1={article._id}/><br></br><br></br>\n      {rendercomments()}\n      <br></br><br></br>\n    </div>\n  );\n};\n\nexport default Article;\n"]},"metadata":{},"sourceType":"module"}