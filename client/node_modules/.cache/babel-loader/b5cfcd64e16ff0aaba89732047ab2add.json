{"ast":null,"code":"var _jsxFileName = \"/home/premtsd/mern_personal_blog-master/client/src/routes/NewArticle/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Style from \"./NewArticle.module.css\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nconst NewArticle = () => {\n  let history = useHistory();\n  let {\n    slug\n  } = useParams();\n  const [editing, setEditing] = useState(false);\n  const [id, setId] = useState(\"\");\n  const [article, setArticle] = useState({\n    image: \"\",\n    title: \"\",\n    description: \"\",\n    markdown: \"\"\n  });\n  useEffect(() => {\n    if (slug) {\n      getArticleBySlug(slug);\n      setEditing(true);\n    }\n  }, [slug]);\n\n  const getArticleBySlug = async slug => {\n    try {\n      const res = await axios.get(`https://rhodlib-blog.herokuapp.com/api/post/${slug}`);\n      setArticle(res.data);\n      setId(res.data._id);\n    } catch (err) {\n      console.log({\n        error: err\n      });\n    }\n  };\n\n  const handleInputChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setArticle({ ...article,\n      [name]: value\n    });\n  };\n\n  const onSubmit = async event => {\n    event.preventDefault();\n\n    if (sessionStorage.token) {\n      if (editing) {\n        try {\n          axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n          await axios.put(`http://localhost:4000/api/update/${id}`, article);\n          history.push(`/article/${slug}`);\n        } catch (err) {\n          console.log({\n            error: err\n          });\n        }\n      } else {\n        try {\n          axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n          await axios.post(\"https://rhodlib-blog.herokuapp.com/api/new/post\", article);\n          history.push(\"/\");\n        } catch (err) {\n          console.log({\n            error: err\n          });\n        }\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    className: Style.form,\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    required: true,\n    placeholder: \"Url image layout\",\n    name: \"image\",\n    value: article.image,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    required: true,\n    placeholder: \"Title\",\n    name: \"title\",\n    value: article.title,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    required: true,\n    placeholder: \"Description\",\n    name: \"description\",\n    value: article.description,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    required: true,\n    placeholder: \"Markdown here\",\n    name: \"markdown\",\n    value: article.markdown,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => history.goBack(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, editing ? \"Edit\" : \"Create\")));\n};\n\nexport default NewArticle;","map":{"version":3,"sources":["/home/premtsd/mern_personal_blog-master/client/src/routes/NewArticle/index.js"],"names":["React","useState","useEffect","axios","Style","useHistory","useParams","NewArticle","history","slug","editing","setEditing","id","setId","article","setArticle","image","title","description","markdown","getArticleBySlug","res","get","data","_id","err","console","log","error","handleInputChange","event","name","value","target","onSubmit","preventDefault","sessionStorage","token","defaults","headers","common","put","push","post","form","goBack"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Style from \"./NewArticle.module.css\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nconst NewArticle = () => {\n  let history = useHistory();\n  let { slug } = useParams();\n  const [editing, setEditing] = useState(false);\n  const [id, setId] = useState(\"\");\n  const [article, setArticle] = useState({\n    image: \"\",\n    title: \"\",\n    description: \"\",\n    markdown: \"\",\n  });\n\n  useEffect(() => {\n    if (slug) {\n      getArticleBySlug(slug);\n      setEditing(true);\n    }\n  }, [slug]);\n\n  const getArticleBySlug = async (slug) => {\n    try {\n      const res = await axios.get(`https://rhodlib-blog.herokuapp.com/api/post/${slug}`);\n      setArticle(res.data);\n      setId(res.data._id);\n    } catch (err) {\n      console.log({ error: err });\n    }\n  };\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    setArticle({ ...article, [name]: value });\n  };\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n\n    if (sessionStorage.token) {\n      if (editing) {\n        try {\n          axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n          await axios.put(`http://localhost:4000/api/update/${id}`, article);\n          history.push(`/article/${slug}`);\n        } catch (err) {\n          console.log({ error: err });\n        }\n      } else {\n        try {\n          axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n          await axios.post(\"https://rhodlib-blog.herokuapp.com/api/new/post\", article);\n          history.push(\"/\");\n        } catch (err) {\n          console.log({ error: err });\n        }\n      }\n    }\n  };\n\n  return (\n    <form className={Style.form} onSubmit={onSubmit}>\n      <input\n        type=\"text\"\n        required\n        placeholder=\"Url image layout\"\n        name=\"image\"\n        value={article.image}\n        onChange={handleInputChange}\n      />\n      <input\n        type=\"text\"\n        required\n        placeholder=\"Title\"\n        name=\"title\"\n        value={article.title}\n        onChange={handleInputChange}\n      />\n      <input\n        type=\"text\"\n        required\n        placeholder=\"Description\"\n        name=\"description\"\n        value={article.description}\n        onChange={handleInputChange}\n      />\n      <textarea\n        required\n        placeholder=\"Markdown here\"\n        name=\"markdown\"\n        value={article.markdown}\n        onChange={handleInputChange}\n      />\n      <div>\n        <button onClick={() => history.goBack()}>Back</button>\n        <button type=\"submit\">{editing ? \"Edit\" : \"Create\"}</button>\n      </div>\n    </form>\n  );\n};\n\nexport default NewArticle;\n"]},"metadata":{},"sourceType":"module"}