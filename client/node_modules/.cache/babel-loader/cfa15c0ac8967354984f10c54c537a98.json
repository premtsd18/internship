{"ast":null,"code":"var _jsxFileName = \"/home/premtsd/mern_personal_blog-master/client/src/routes/article/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Style from \"./Article.module.css\";\nimport Blogheader from \"../../components/blogheader/index\";\nimport ReactMarkdown from \"react-markdown\";\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\";\nimport Comment from \"../comments/index\";\n\nconst Article = () => {\n  let history = useHistory();\n  const [article, setArticle] = useState({});\n  const [comment, setComment] = useState({});\n  const {\n    slug\n  } = useParams();\n  useEffect(() => {\n    getDataBySlug(slug);\n  }, [slug]);\n\n  const getDataBySlug = async slug => {\n    try {\n      const res = await axios.get(`http://localhost:4000/api/post/${slug}`);\n      setArticle(res.data);\n      setComment(res.data.comment);\n    } catch (err) {\n      console.log({\n        error: err\n      });\n    }\n  };\n\n  const deleteArticle = async id => {\n    if (window.confirm(\"Do you wanna delete this article?\")) {\n      try {\n        axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n        await axios.delete(`http://localhost:4000/api/delete/${id}`);\n        history.push(\"/\");\n      } catch (err) {\n        console.log({\n          error: err\n        });\n      }\n    }\n  };\n\n  const editDeleteArticle = id => {\n    if (sessionStorage.token) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: Style.buttons,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => deleteArticle(id),\n        className: Style.linkButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }\n      }, \"Delete\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => history.push(`/edit/${slug}`),\n        className: Style.linkButton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }\n      }, \"Edit\"));\n    }\n  };\n\n  const renderMarkdown = () => {\n    if (article.markdown === undefined) {\n      return /*#__PURE__*/React.createElement(SkeletonTheme, {\n        color: \"#161f27\",\n        highlightColor: \"#324759\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Skeleton, {\n        count: 15,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(ReactMarkdown, {\n        className: Style.markdown,\n        source: article.markdown,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }\n      });\n    }\n  };\n\n  const rendercomments = () => {\n    if (comment.length === 0 || comment == null) ;else {\n      var arrays = [];\n\n      for (var val in comment) {\n        arrays.push(comment[val]);\n      }\n\n      return arrays.map(array => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 16\n          }\n        }, /*#__PURE__*/React.createElement(\"hr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 11\n          }\n        }), array, /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 19\n          }\n        }), /*#__PURE__*/React.createElement(\"hr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 28\n          }\n        }));\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: Style.article,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: Style.controlHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Blogheader, {\n    image: article.image,\n    title: article.title,\n    description: article.description,\n    createdAt: article.createdAt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }), editDeleteArticle(article._id)), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }), renderMarkdown(), /*#__PURE__*/React.createElement(Comment, {\n    slug1: article._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }), rendercomments());\n};\n\nexport default Article;","map":{"version":3,"sources":["/home/premtsd/mern_personal_blog-master/client/src/routes/article/index.js"],"names":["React","useEffect","useState","useHistory","useParams","axios","Style","Blogheader","ReactMarkdown","Skeleton","SkeletonTheme","Comment","Article","history","article","setArticle","comment","setComment","slug","getDataBySlug","res","get","data","err","console","log","error","deleteArticle","id","window","confirm","defaults","headers","common","sessionStorage","token","delete","push","editDeleteArticle","buttons","linkButton","renderMarkdown","markdown","undefined","rendercomments","length","arrays","val","map","array","controlHeader","image","title","description","createdAt","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Style from \"./Article.module.css\";\nimport Blogheader from \"../../components/blogheader/index\";\nimport ReactMarkdown from \"react-markdown\";\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\";\nimport Comment from \"../comments/index\";\n\nconst Article = () => {\n  let history = useHistory();\n  const [article, setArticle] = useState({});\n  const [comment, setComment] = useState({});\n  const { slug } = useParams();\n\n  useEffect(() => {\n    getDataBySlug(slug);\n  }, [slug]);\n\n  const getDataBySlug = async (slug) => {\n    try {\n      const res = await axios.get(`http://localhost:4000/api/post/${slug}`);\n      setArticle(res.data);\n      setComment(res.data.comment);\n    } catch (err) {\n      console.log({ error: err });\n    }\n  };\n\n  const deleteArticle = async (id) => {\n    if (window.confirm(\"Do you wanna delete this article?\")) {\n      try {\n        axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n        await axios.delete(`http://localhost:4000/api/delete/${id}`);\n        history.push(\"/\");\n      } catch (err) {\n        console.log({ error: err });\n      }\n    }\n  };\n\n  const editDeleteArticle = (id) => {\n    if (sessionStorage.token) {\n      return (\n        <div className={Style.buttons}>\n          <button\n            onClick={() => deleteArticle(id)}\n            className={Style.linkButton}\n          >\n            Delete\n          </button>\n          <button\n            onClick={() => history.push(`/edit/${slug}`)}\n            className={Style.linkButton}\n          >\n            Edit\n          </button>\n        </div>\n      );\n    }\n  };\n\n  const renderMarkdown = () => {\n    if (article.markdown === undefined) {\n      return (\n        <SkeletonTheme color=\"#161f27\" highlightColor=\"#324759\">\n          <Skeleton count={15} />\n        </SkeletonTheme>\n      );\n    } else {\n      return (\n        <ReactMarkdown className={Style.markdown} source={article.markdown} />\n      );\n    }\n  };\n\n  const rendercomments = () => {\n    if (comment.length===0 || comment==null) ;\n     else {   \n      var arrays=[]\n      for(var val in comment){\n        arrays.push(comment[val])\n      }\n      return arrays.map((array)=>{\n        return <div >\n          <hr></hr>\n          <br></br>\n           {array}<br></br><hr></hr>\n        </div>\n      })\n     \n    }\n  };\n\n  return (\n    <div className={Style.article}>\n      <div className={Style.controlHeader}>\n        <Blogheader\n          image={article.image}\n          title={article.title}\n          description={article.description}\n          createdAt={article.createdAt}\n        />\n        {editDeleteArticle(article._id)}\n      </div>\n      <hr />\n  {renderMarkdown()}\n      <Comment slug1={article._id}/>\n      {rendercomments()}\n    </div>\n  );\n};\n\nexport default Article;\n"]},"metadata":{},"sourceType":"module"}